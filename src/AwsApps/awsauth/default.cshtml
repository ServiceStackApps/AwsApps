<!DOCTYPE html>
<html>
<head>
    <title>AWS Auth</title>
    <link href="/img/favicon.png" rel="icon">
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link href="css/bootstrap-social.css" rel="stylesheet" />
    <link href="css/default.css" rel="stylesheet"/>

    <script src="/js/jquery-2.1.4.min.js"></script>
    <script src="js/autogrid.js"></script>
    <script src="/js/ss-utils.js"></script>

    <script type="text/javascript">
        var hashVars = $.ss.queryString(location.hash.replace('#', '?'));
        if (hashVars['f']) {
            $("#autherror").html($.ss.humanize(hashVars['f']));
        }

        $.getJSON("/api/auth", function (r) {
            var html = "<h4 class='success'>Authenticated!</h4>"
                + "<table>"
                + $.map(r, function (k, v) {
                    return "<tr><th>" + v + "<th>"
                        + "<td>" + (typeof k == 'string' ? k : JSON.stringify(k)) + "</td></tr>";
                }).join('')
                + "</table>";
            $("#status").html(html);
        }).error(function () {
            $("#status").html("<h4 class='error'>Not Authenticated</h4>");
        });

        $(document).bindHandlers({
            switchUser: function (u) {
                $("#userName").val(u);
                $("#password").val('test');
            }
        });

        $("#form-register").bindForm({
            success: function (r) { location.href = '/'; }
        });

        @*var html = autogrid( @(Model.UserAuths.AsRawJson()));
        $("#userauths").html(html);
        html = autogrid( @(Model.UserAuthDetails.AsRawJson()));
        $("#userauthdetails").html(html);*@
    </script>
</head>
<body>
    <div class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="/" style="" title="Home">
                            <img src="/img/logo.png" alt="Home"/>
                            <b>AWS Auth</b>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="container body-content">

        @*@using ServiceStack.Html
            @model Mvc.Models.HomeViewModel
            @{
                ViewBag.Title = "Home Page";
                var session = Model.Session;
                var userName = session.UserName ?? session.Email ?? "test";
            }*@

        <div class="row" style="margin: 70px 0 0 0;">
            <div class="col-lg-6">

                @if (base.IsAuthenticated)
            {
                    <h2 class="success">Authenticated!</h2>
                }
                else
                {
                    <h2 class="error">Not Authenticated</h2>
                }
                <div id="autherror" class="error"></div>

                <form action="/Home/Login">
                    @base.Html.ValidationSummary()
                    <input type="hidden" name="redirect" value="@base.Request.QueryString["redirect"]" />

                    <div class="form-group">
                        <input class="form-control input-lg" id="userName" name="userName" type="text" placeholder="UserName" value="test">
                    </div>
                    <div class="form-group form-inline">
                        <input class="form-control input-lg" id="password" name="password" type="text" placeholder="Password" value="test">
                        <button type="submit" class="btn btn-lg btn-default">Login</button>
                    </div>
                    <div style="margin:10px">
                        <b>Quick Login:</b>
                        <span data-click="switchUser:test">test</span>,
                        <span data-click="switchUser:test2">test2</span>,
                        <span data-click="switchUser:new.user@@gmail.com">new.user</span>
                    </div>
                </form>

                <form action="/Home/Logout">
                    <button type="submit" class="btn btn-default">Logout</button>
                </form>

            </div>
            <div class="col-lg-6">

                <h2 style="margin: 30px 0 0 0;">ServiceStack Status (Ajax)</h2>
                <div id="status"></div>

                <table class="table table-striped" style="margin: 20px 0 0 0">
                    <tr>
                        <th colspan="2">ServiceStack Auth &amp; Session Links:</th>
                    </tr>
                    <tr>
                        <th>View Session Info</th>
                        <td><a href="/awsauth/session">/awsauth/session</a></td>
                    </tr>
                    <tr>
                        <th>AuthOnly Page</th>
                        <td><a href="/AuthOnly">/AuthOnly</a></td>
                    </tr>
                    <tr>
                        <th>Requires Role Page</th>
                        <td><a href="/RequiresRole">/RequiresRole</a></td>
                    </tr>
                    <tr>
                        <th>Reset All User Info</th>
                        <td><a href="/awsauth/reset">/awsauth/reset</a></td>
                    </tr>
                </table>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="col-lg-6">
                <h3>Sign in with 3rd Party Providers</h3>
                <div style="float: left; width: 250px; padding: 0 0 0 0;">
                    <a class="btn btn-block btn-social btn-twitter" href="/api/auth/twitter">
                        <b class="fa fa-twitter">T</b>Sign in with Twitter
                    </a>
                    <a class="btn btn-block btn-social btn-facebook" href="/api/auth/facebook">
                        <b class="fa fa-facebook">fb</b>Sign in with Facebook
                    </a>
                    <a class="btn btn-block btn-social btn-github" href="/api/auth/github">
                        <b class="fa fa-github"></b>Sign in with GitHub
                    </a>
                    <a class="btn btn-block btn-social btn-google-plus" href="/api/auth/GoogleOAuth">
                        <b class="fa fa-google-plus">G</b>Sign in with Google
                    </a>
                    <a class="btn btn-block btn-social btn-yahoo" href="/api/auth/YahooOpenId">
                        <b class="fa fa-yahoo">Y!</b>Sign in with Yahoo
                    </a>
                    <a class="btn btn-block btn-social btn-linkedin" href="/api/auth/LinkedIn">
                        <b class="fa fa-linkedin">in</b>Sign in with LinkedIn
                    </a>

                    @*<br />

                        <a class="btn btn-block btn-social btn-windows" href="/api/auth/windowsauth">
                            Sign in with Windows Auth
                        </a>*@
                </div>
            </div>
            <div class="col-lg-6">
                <h3>Register New User</h3>
                <form id="form-register" action="/api/register" method="POST">
                    <div class="form-group">
                        <input class="form-control input-lg" type="text" name="FirstName" value="New" placeholder="First Name">
                        <span class="help-block"></span>
                    </div>
                    <div class="form-group">
                        <input class="form-control input-lg" type="text" name="LastName" value="User" placeholder="Last Name">
                        <span class="help-block"></span>
                    </div>
                    <div class="form-group">
                        <input class="form-control input-lg" type="text" name="Email" value="new.user@gmail.com" placeholder="Email">
                        <span class="help-block"></span>
                    </div>
                    <div class="form-group">
                        <input class="form-control input-lg" type="text" name="Password" value="test" placeholder="Password">
                        <span class="help-block"></span>
                    </div>
                    <div class="form-group">
                        <input type="checkbox" id="chkAutoLogin" name="AutoLogin" value="true" checked="checked">
                        <label for="chkAutoLogin">Auto Login</label>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-lg btn-default" type="submit">Register</button>
                    </div>
                    <div class="clearfix"></div>
                </form>
            </div>
        </div>

        @*<div style="padding: 10px">
                @if (!Model.UserAuths.IsEmpty())
                {
                    <h3>User Auths</h3>
                    <div class="autogrid" id="userauths"></div>
                }

                @if (!Model.UserAuthDetails.IsEmpty())
                {
                    <h3>User Auth Details</h3>
                    <div class="autogrid" id="userauthdetails"></div>
                }
            </div>*@

        <a href="https://github.com/ServiceStack/Test/tree/master/src/Mvc">
            <img style="position:absolute;top:0;right:0;border:0;z-index:1031"
                 src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
                 alt="Fork me on GitHub">
        </a>
    </div>
</body>
</html>